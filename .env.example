# =============================================================================
# CONFIGURAÇÃO DE EXEMPLO - QUICK START
# =============================================================================
# Este arquivo demonstra como configurar rapidamente os templates para sua aplicação

# Copie este arquivo para .env e ajuste os valores conforme necessário
# Ou use as variáveis de ambiente diretamente em seu pipeline CI/CD

# =============================================================================
# CONFIGURAÇÃO GLOBAL
# =============================================================================
APP_NAME=myapi
VERSION=1.0.0
ENVIRONMENT=prod
NAMESPACE=myapi-prod
MANAGED_BY=platform-team

# =============================================================================
# CONFIGURAÇÃO DE REDE
# =============================================================================
SERVICE_HOST=api.company.com
SERVICE_HOST_ADDITIONAL=www.company.com
SERVICE_NAME=api-service
SERVICE_PORT=8080
GATEWAY_SELECTOR=aks-istio-ingressgateway-external

# =============================================================================
# CONFIGURAÇÃO DE ROTEAMENTO
# =============================================================================
# Roteamento principal
URI_PREFIX=/
WEIGHT_PRIMARY=90
SUBSET_PRIMARY=stable

# Roteamento canary
WEIGHT_CANARY=10
SUBSET_CANARY=canary

# Roteamento API
API_PREFIX=/api/
API_SERVICE_NAME=api-service
API_SERVICE_PORT=8080
API_WEIGHT_PRIMARY=90
API_WEIGHT_CANARY=10
API_TIMEOUT=60s

# Roteamento de health check
HEALTH_SERVICE_NAME=api-service
HEALTH_SERVICE_PORT=8080
HEALTH_TIMEOUT=5s

# Roteamento de conteúdo estático
STATIC_PREFIX=/static/
ASSETS_PREFIX=/assets/
STATIC_SERVICE_NAME=frontend-service
STATIC_SERVICE_PORT=8080
STATIC_CACHE_CONTROL="public, max-age=31536000"

# =============================================================================
# CONFIGURAÇÃO DE RETRY E TIMEOUT
# =============================================================================
RETRY_ATTEMPTS=3
RETRY_TIMEOUT=10s
RETRY_ON=5xx,gateway-error,connect-failure,refused-stream
REQUEST_TIMEOUT=30s

# =============================================================================
# CONFIGURAÇÃO DE FAULT INJECTION (PARA TESTES)
# =============================================================================
FAULT_DELAY_PERCENTAGE=0
FAULT_DELAY_DURATION=5s
FAULT_ABORT_PERCENTAGE=0
FAULT_ABORT_STATUS=500

# =============================================================================
# CONFIGURAÇÃO DE TRAFFIC MIRRORING
# =============================================================================
MIRROR_SERVICE_NAME=
MIRROR_SERVICE_PORT=8080
MIRROR_SUBSET=mirror
MIRROR_PERCENTAGE=0

# =============================================================================
# CONFIGURAÇÃO DE CONNECTION POOL
# =============================================================================
TCP_MAX_CONNECTIONS=10
HTTP1_MAX_PENDING=10
HTTP2_MAX_REQUESTS=100
CONSECUTIVE_GATEWAY_ERRORS=5
CONSECUTIVE_5XX_ERRORS=5
LOAD_BALANCER_SIMPLE=LEAST_CONN

# =============================================================================
# CONFIGURAÇÃO DE SUBSETS
# =============================================================================
SUBSET_STABLE_NAME=stable
SUBSET_STABLE_VERSION=v1
SUBSET_CANARY_NAME=canary
SUBSET_CANARY_VERSION=v2

# =============================================================================
# CONFIGURAÇÃO DE SEGURANÇA
# =============================================================================
MTLS_MODE=STRICT
AUTH_ACTION=ALLOW
PA_NAME=default-pa
AUTH_POLICY_NAME=default-policy

# =============================================================================
# CONFIGURAÇÃO ESPECÍFICA POR AMBIENTE
# =============================================================================

# DESENVOLVIMENTO
# Descomente e ajuste para ambiente de desenvolvimento
# FAULT_DELAY_PERCENTAGE=1
# FAULT_ABORT_PERCENTAGE=0.5
# MIRROR_PERCENTAGE=10
# MTLS_MODE=PERMISSIVE
# SERVICE_HOST=dev-api.internal.com
# GATEWAY_SELECTOR=aks-istio-ingressgateway-internal

# STAGING
# Descomente e ajuste para ambiente de staging
# WEIGHT_CANARY=10
# MIRROR_PERCENTAGE=5
# SERVICE_HOST=staging-api.company.com

# PRODUÇÃO
# Configuração padrão já otimizada para produção
# Mantenha fault injection desabilitado
# Use mTLS STRICT
# Use gateway externo